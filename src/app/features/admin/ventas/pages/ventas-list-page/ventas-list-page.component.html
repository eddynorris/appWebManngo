<div class="page-container">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <h1>Gestión de Ventas</h1>
      <p>Busca, crea y gestiona todas las ventas</p>
    </div>
    <div class="header-actions">
      <a routerLink="/admin/ventas/new" class="btn-primary">
        <fa-icon [icon]="faPlus"></fa-icon>
        Nueva Venta
      </a>
    </div>
  </div>

  <!-- Filtros Compartidos -->
  <app-table-filters
    [filters]="filterConfigs()"
    [initialValues]="currentFilterValues()"
    [clients]="clientes()"
    (filtersChange)="onFiltersChange($event)"
    (search)="onSearch($event)"
    (export)="onExport($event)"
    (clear)="onClearFilters()"
  ></app-table-filters>

  <!-- Reusable Data Table -->
  <app-data-table
    [data]="ventas()"
    [columns]="columns"
    [actions]="actions"
    (onAction)="handleTableAction($event)"
  ></app-data-table>

  <!-- Pagination -->
  @if (pagination()) {
    <app-pagination
      [pagination]="pagination()!"
      (pageChange)="onPageChange($event)"
      (perPageChange)="onPerPageChange($event)"
    ></app-pagination>
  }
</div>

@if (isModalVisible() && selectedVenta()) {
  <app-venta-detalle-modal
    [venta]="selectedVenta()!"
    [visible]="isModalVisible"
    (close)="handleCloseModal()"
  ></app-venta-detalle-modal>
}

@if (isDeleteModalVisible()) {
  <app-confirmation-modal
    [title]="'Confirmar Eliminación'"
    [message]="'¿Está seguro que desea eliminar esta venta? Esta acción no se puede deshacer.'"
    [confirmText]="'Eliminar Venta'"
    [cancelText]="'Cancelar'"
    (confirm)="handleDeleteConfirmation()"
    (cancel)="closeDeleteModal()"
  ></app-confirmation-modal>
}
